<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>A Game of Thrones Story</title>
        <link rel="stylesheet" href="./style.css" />
        <!-- <link
            rel="stylesheet"
            href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
            integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb"
            crossorigin="anonymous"
        /> -->
    </head>
    <body>
        <div id="main">
            <div class="network-graph">
                <svg
                    id="network"
                    width="1200"
                    height="750"
                    style="border: 1px solid #777;"
                ></svg>
            </div>
            <div class="controls">
                <form name="myform" onSubmit="return handleClick()">
                    <input type="text" id="myVal" placeholder="Search for a character&hellip;">
                    <input name="Submit"  type="submit" value="Search">
                </form>
                <ul></ul>
                <script>
                    function handleClick(event){
                        var text = document.getElementById("myVal").value.toUpperCase()
                        var nodes = d3.selectAll('.node')
                        var links = d3.selectAll('.link')
                        //reset the opacities of everything
                        nodes.style('opacity', 0.2); 
                        links.style('opacity', 0.2);
                        nodes.each(function(d, i) {
                            var node = d3.select(this)
                            //checks if the name starts with the search text
                            if (d.id.indexOf(text) === 0) {
                                //shade in the current node
                                node.transition(500).style('opacity', 1.0) 
                                //shade in the neighboring nodes
                                // d3.selectAll(".node").each(function(d0, i) {
                                //     var otherNode = d3.select(this)
                                //     if (d.neighbors.includes(d0.id)) {
                                //         otherNode.transition(500).style('opacity', 1.0)
                                //     }
                                // })
                                //shade in the adjacent lines
                                // links.each(function(d1, i) {
                                //     var link = d3.select(this)
                                //     if (d.id == d1.source.id || d.id == d1.target.id) {
                                //         link.transition(500).style('opacity', 1.0)
                                //     }
                                // })
                            }
                        })
                        
                        return false;
                    }
                </script>
                <label for="seasonSelect">Select a Season:</label>
                <select class="dropdown" id="seasonSelect" onchange="onSeasonChanged()">
                  <option selected value="s1">Season 1</option>
                  <option value="s2">Season 2</option>
                  <option value="s3">Season 3</option>
                  <option value="s4">Season 4</option>
                  <option value="s5">Season 5</option>
                  <option value="s6">Season 6</option>
                  <option value="s7">Season 7</option>
                  <option value="s8">Season 8</option>
                </select>
                <button class="btn" onclick="clusterClick()">
                    Cluster by House
                </button>
            </div>
        </div>
    </body>
    <!-- <script
        src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"
    ></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"
        integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh"
        crossorigin="anonymous"
    ></script>
    <script
        src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"
        integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
        crossorigin="anonymous"
    ></script> -->
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="./main.js" type="text/javascript"></script>
</html>
